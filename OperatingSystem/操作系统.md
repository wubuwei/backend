```
TODO
1. IO 多路复用是什么？有哪些 api？


2. select 和 epoll 的区别？水平触发和边缘触发的区别是啥？使用的时候需要注意什么？
epoll 储存描述符的数据结构是什么？
select 有描述符限制吗？是多少？

3. 进程 / 线程 / 协程区别？go 和 swoole 的协程实现有啥区别？（分配资源的基本单位 / 运行和调度的基本单位 / 用户线程，M:N 模型和 N:1 模型）

1. 什么是IO多路复用


2. IO多路复用解决什么问题

IO多路复用解决的本质问题是在用更少的资源完成更多的事

3. I/O 常见模型

- 阻塞IO
- 非阻塞IO
- IO多路复用
- 信号驱动IO
- 异步IO

参照链接： https://zhuanlan.zhihu.com/p/115220699

```

#### 操作系统基本概念
##### 什么是内核？

`内核（Kernel）` 在计算机科学中是一个用来管理软件发出的数据 `I/O（输入与输出）` 要求的电脑程序，将这些要求转译为数据处理的指令并交由 `中央处理器（CPU）` 及电脑中其他电子组件进行处理，是现代操作系统中最基本的部分。

它是为众多应用程序提供对计算机硬件的安全访问的一部分软件，这种访问是有限的，并由内核决定一个程序在什么时候对某部分硬件操作多长时间。

直接对硬件操作是非常复杂的。所以内核通常提供一种硬件抽象的方法，来完成这些操作。

内核，是一个操作系统的核心。是基于硬件的第一层软件扩充，提供操作系统的最基本的功能，是操作系统工作的基础，它负责管理系统的进程、内存、设备驱动程序、文件和网络系统，决定着系统的性能和稳定性。
![A kernel connects the application software to the hardware of a computer.](https://raw.githubusercontent.com/wubuwei/backend_image/master/%E5%86%85%E6%A0%B8.png)

内核分类：
- 单内核（Monolithic kernels）：Linux、FreeBSD
- 微内核（Microkernels）
- 混合内核（Hybrid kernels）：XNU(MacOS)、NT(Windows)
- 外内核（Exokernel）

##### 什么是文件描述符？

`文件描述符（File descriptor）` 是计算机科学中的一个术语，是一个用于表述指向文件的引用的抽象化概念。

文件描述符在形式上是一个非负整数。实际上，它是一个索引值，指向内核为每一个进程所维护的该进程打开文件的记录表。当程序打开一个现有文件或者创建一个新文件时，内核向进程返回一个文件描述符。

在 `linux` 系统中打开文件就会获得文件描述符，它是个很小的非负整数。每个进程在 `PCB(Process Control Block)` 中保存着一份文件描述符表，文件描述符就是这个表的索引，每个表项都有一个指向已打开文件的指针。

##### 什么是 IPC？

`进程间通信（IPC，Inter-Process Communication）`，是一组编程接口，让程序员能够协调不同的进程，使之能在一个操作系统里同时运行，并相互传递、交换信息。这使得一个程序能够在同一时间里处理许多用户的要求。

每个进程各自有不同的用户地址空间，任何一个进程的全局变量在另一个进程中都看不到，所以进程之间要交换数据必须通过内核，在内核中开辟一块缓冲区，进程间通过缓冲区进行进程间通信。

##### 什么是进程？

狭义定义：`进程（process）` 是正在运行的程序的实例。

广义定义：进程是一个具有一定独立功能的程序关于某个数据集合的一次运行活动。它是操作系统动态执行的基本单元，在传统的操作系统中，进程既是基本的分配单元，也是基本的执行单元。

进程是操作系统对一个正在运行程序的一种抽象。在一个系统上可以同时运行多个进程，而每个进程都好像在独占地使用硬件。而并发执行，则是说一个进程的指令和另一个进程的指令是相互交错执行的。
在大多数系统中，需要运行的进程数是多于可以运行它们的 `CPU` 个数的。传统系统在一个时刻只能执行一个程序，而先进的多核处理器同时能够执行多个程序。无论是在单核还是多核系统中，一个 `CPU` 看上去都像是在并发地执行多个进程，这是通过处理器在进程间切换来实现的。操作系统实现这种交错执行的机称为上下文切换。

##### 什么是线程？

`线程（thread）` 是操作系统能够进行运算调度的最小单位。大部分情况下，它被包含在进程之中，是进程中的实际运作单位。一条线程指的是进程中一个单一顺序的控制流，一个进程中可以并发多个线程，每条线程并行执行不同的任务。


##### 进程与线程的区别
1. 根本区别：
 进程是计算机资源(包括cpu、内存、磁盘IO等)分配的最小单位，线程是程序执行(CPU调度和分配)的最小单位。
2. 开销：
 进程有独立的地址空间，每启动一个进程，系统都会为进程分配地址空间，建立数据表来维护代码段、堆栈段和数据段，这种开销非常昂贵。

 线程没有地址空间，但是线程共享进程的地址空间。

 同一进程中的多个线程共享所属进程的代码段（代码和常量）、数据段（全局变量和静态变量）、扩展段（堆存储），但是每个线程拥有自己的栈段（又叫运行时段，用于存储所有变量和临时变量）、寄存器的内容。

 线程是一种轻量级的进程，与进程相比，线程的开销更小。

3. 健壮性
  因为不同进程有自己独立的地址空间，所以一个进程死掉，不会被其它进程有影响。而一个进程死掉，线程所属的整个进程也会死掉，所以多进程方式比多线程方式更加健壮。
  


#### 1. 三种构建并发程序的机制：进程、I/O 多路复用、线程

`进程` 是有内核自动调度的，而且因为它们有各自独立的虚拟地址空间，所以要实现共享数据，必须要有显示的 `IPC` 机制。事件驱动程序创建它们自己的并发逻辑流，这些逻辑流被模型化为状态机，用 `I/O 多路复用` 来显示地调度这些流。因为程序运行在一个单一进程中，所以在流之间共享数据速度很快而且很容易。线程是这些方法的混合。同基于 `进程` 的流一样，`线程` 也是由内核自动调度的。同基于 `I/O` 多路复用的流一样，线程试运行在一个单一进程的上下文中的，因此可以快速而方便地共享内存。


#### 2. 什么是IO多路复用

`IO多路复用` 是一种同步 `IO` 模型，实现一个线程可以监视多个文件句柄；一旦某个文件句柄就绪，就能够通知应用程序进行相应的读写操作；没有文件句柄就绪时会阻塞应用程序，交出 `CPU`。多路指的是网络连接，复用指的是同一个线程。

一句话解释：单线程或单进程同时监测若干个文件描述符是否可以执行IO操作的能力。
https://zhuanlan.zhihu.com/p/150972878

#### 3. 为什么有IO多路复用机制?

没有 `IO多路复用` 机制时，有 `BIO`、`NIO` 两种实现方式，但有一些问题
